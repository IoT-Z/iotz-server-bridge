<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
</head>
<body>
    Teste

    <iframe id="ìframe" src="ui-module-default/" width="100%" height="100%"></iframe>

    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script>
        var state, app;
        var socket = io.connect('http://localhost:3000/');

        socket.on('data', function (data) {
            var module = document.getElementById('ìframe').contentWindow;

            module.addEventListener('load', function(){
                module.postMessage({
                    type: 'create',
                    moduleId: data.clients[0].id,
                    state: data.clients[0].state
                }, '*');
            });

            window.addEventListener('message', function(e) {
                socket.emit(e.data.type, e.data.data);
            });
        });
    </script>
</body>
</html>
